<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plinko</title>
    <script src = "js/pixi.min.js"></script>

   <script>
    let app;
    let box;
    let player;
    let start_p;
    let pins;
    
    function set_player(pl, pivot, w, h, app_w, app_h) //FUNCTION TO CREATE NEW PLAYER
    {
        pl.anchor.set(pivot)
        pl.width = w;
        pl.height = h;

        //move player to center of screen
        pl.x = app_w;
        pl.y = app_h;

        pl.vy = 0;
    }

    function set_box(w, h, app_w, app_h, world)
    {
        box = PIXI.Sprite.from("images/collect_box.png");

        box.width = w;
        box.height = h;
        box.x = app_w;
        box.y = app_h;
        
        world.stage.addChild(box);

    }

    function set_start_point(w, h, app_w, app_h, world)
    {
        start_p = PIXI.Sprite.from("images/player_start_point.png");

        start_p.width = w;
        start_p.height = h;
        start_p.x = app_w;
        start_p.y = app_h;
        
        world.stage.addChild(start_p);
    }

    function set_pins(w, h, app_w, app_h, world)
    {

        // WE WILL USE THE STAR PATTERN ALGORITHM TO SET THE PINS IN GRID SHAPE
        pins = PIXI.Sprite.from("images/pins.png");

        pins.width = w;
        pins.height = h;
        pins.x = app_w;
        pins.y = app_h;
        
        world.stage.addChild(pins);
    }

    window.onload = function()
    {

        app = new PIXI.Application(
            {
                width: 1000,
                height: 600,
                backgroundColor: 818041}
        );
        document.body.appendChild(app.view);
        
        //ADD THE WORLD ITEMS: 
        //PINS
        set_pins(20, 20, 400, 100, app);
        set_pins(20, 20, 500, 100, app);
        set_pins(20, 20, 600, 100, app);
        set_pins(20, 20, 400, 200, app);
        set_pins(20, 20, 500, 200, app);
        set_pins(20, 20, 600, 200, app);

        //BUCKETS
        let b_temp = 60; //buckets far left position

        for (let i = 0; i < 9; i++)
        {
            set_box(80, 40, (b_temp), 500, app);
            b_temp += 100;
        }
        
        //STARTING POINT
        set_start_point(45, 45, app.view.width/2, 0, app);

        //ADD PLAYER TO THE GAME
        player = PIXI.Sprite.from("/images/player_ball.png");
        set_player(player, 0.5, 40, 40, app.view.width/2, 25);
        app.stage.addChild(player);

        app.ticker.add((delta) =>
        {
            //player.y += player.vy;
            //player.vy += 0.01;

            /*if (player.y > 500)
            {
                player.vy *= -0.9;
                player.y += player.vy;
            }*/
        });
    }
   </script>

</head>
<body>
</body>
</html>